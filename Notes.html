<!DOCTYPE html>
<html>
<head>
	<title>Joe Hacker's Notes</title>
	<link rel="stylesheet" href="Notes.css">
</head>
<body>
	<div id="Header">
		<h1>Joe's Notes</h1>
	</div>
	<div id="inputArea">
		<textarea id="inputText"></textarea>
		<button id="inputSubmit">SUBMIT</button>
		<select id="inputPriority">
			<option id="HP">High Priority</option>
			<option id="MP">Medium Priority</option>
			<option id="LP">Low Priority</option>
		</select>
		<button id="inputSort">SORT</button>
	</div>
	<div id="noteArea">
		<div id="note"></div>
	</div>
<script>
	var ta=document.querySelector("textarea");
	var submit=document.querySelectorAll("button")[0];
	var sort=document.querySelectorAll("button")[1];
	var note=document.getElementById("note");
	submit.addEventListener("click",function(){
		addNote(ta.value);
	});
	sort.addEventListener("click",function(){
		sortNotes(note);
	});
	
	function addNote(input){
		if(input){
			var node=document.createElement("p");
			var para=document.createTextNode(input);
			node.appendChild(para);
			var edit=document.createElement("button");
			var del=document.createElement("button");
			edit.innerHTML="Edit";
			del.innerHTML="Delete";
			edit.className="noteEdit";
			del.className="noteDel";
			var select=document.querySelector("select");
			if(select.options[0].selected){
				node.className="note noteHigh";
				node.setAttribute("Priority",3);
			}
			if(select.options[1].selected){
				node.className="note noteMedium";
				node.setAttribute("Priority",2);
			}
			if(select.options[2].selected){
				node.className="note noteLow";
				node.setAttribute("Priority",1);
			}
			node.appendChild(edit);
			node.appendChild(del);
			note.appendChild(node);
			ta.value="";
			del.addEventListener("click",function(){
				deleteText(node);
			});	
			edit.addEventListener("click",function(){
				updateText(node,para);
			});	
		}	
	}
	
	function deleteText(node){
		if(prompt('Are you sure you want to delete the note (y/n):')=='y'){
			node.parentNode.insertBefore(node,node.parentNode.childNodes[0]);
			node.parentNode.removeChild(node.parentNode.childNodes[0]);
		}
	}
	
	function updateText(node,para){
		ta.value=para.textContent;
		var cnf=document.createElement("button");
		cnf.innerHTML="Confirm";
		cnf.className="Confirm";
		node.appendChild(cnf);
		node.childNodes[1].disabled=true;
		cnf.addEventListener("click",function(){
			node.firstChild.textContent=ta.value;
			ta.value="";
			var select=document.querySelector("select");
			if(select.options[0].selected){
				node.classList.remove("noteMedium");
				node.classList.remove("noteLow");
				node.className="note noteHigh";
				node.setAttribute("Priority",3);
			}
			if(select.options[1].selected){
				node.classList.remove("noteHigh");
				node.classList.remove("noteLow");
				node.className="note noteMedium";
				node.setAttribute("Priority",2);
			}	
			if(select.options[2].selected){
				node.classList.remove("noteMedium");
				node.classList.remove("noteHigh");
				node.className="note noteLow";
				node.setAttribute("Priority",1);
			}
			node.childNodes[1].disabled=false;
			node.removeChild(node.lastChild);
		});
	}
	
	function sortNotes(note){
		var i=0,j=0;
		for(i=0;i<note.childNodes.length;i++){
			for(j=i+1;j<note.childNodes.length;j++){
				if(note.childNodes[i].getAttribute("Priority")<note.childNodes[j].getAttribute("Priority")){
					note.insertBefore(note.childNodes[j],note.childNodes[i]);
				}
			}
		}
	}
</script>
</body>
</html>

































